import datetime
import pytest
from real_estate.models import Deal, RealEstate, MonthlyRent
from django.contrib.gis.geos import Point


@pytest.fixture
def create_real_estate():
    def _create_real_estate(
        name: str,
        build_year: int,
        regional_code: str,
        lot_number: str,
        road_name_address: str,
        latitude: str,
        longitude: str,
        point: Point,
    ):
        real_estate = RealEstate(
            name=name,
            build_year=build_year,
            regional_code=regional_code,
            lot_number=lot_number,
            road_name_address=road_name_address,
            latitude=latitude,
            longitude=longitude,
            point=point,
        )
        real_estate.save()
        return real_estate

    return _create_real_estate


@pytest.fixture
def create_deal():
    def _create_deal(
        real_estate_id: int,
        deal_price: int,
        deal_type: str,
        deal_year: int,
        land_area: str,
        deal_month: int,
        deal_day: int,
        area_for_exclusive_use: str,
        floor: str,
        is_deal_canceled: bool,
        deal_canceled_date: datetime,
        area_for_exclusive_use_pyung: str,
        area_for_exclusive_use_price_per_pyung: str,
        type: str,
    ):
        deal = Deal(
            real_estate_id=real_estate_id,
            deal_price=deal_price,
            deal_type=deal_type,
            deal_year=deal_year,
            land_area=land_area,
            deal_month=deal_month,
            deal_day=deal_day,
            area_for_exclusive_use=area_for_exclusive_use,
            floor=floor,
            is_deal_canceled=is_deal_canceled,
            deal_canceled_date=deal_canceled_date,
            area_for_exclusive_use_pyung=area_for_exclusive_use_pyung,
            area_for_exclusive_use_price_per_pyung=area_for_exclusive_use_price_per_pyung,
            type=type,
        )
        deal.save()
        return deal

    return _create_deal


@pytest.fixture
def create_monthly_rent():
    def _create_monthly_rent(deal_id: int, price: int):
        monthly_rent = MonthlyRent(deal_id=deal_id, price=price)
        monthly_rent.save()
        return monthly_rent

    return _create_monthly_rent


@pytest.fixture
def mock_collect_deal_price_of_real_estate():
    return [
        {
            "거래금액": "59,800",
            "거래유형": None,
            "건축년도": "2005",
            "년": "2015",
            "대지권면적": "106.53",
            "법정동": "청운동",
            "연립다세대": "에벤에셀",
            "월": "12",
            "일": "24",
            "전용면적": "107.87",
            "중개사소재지": None,
            "지번": "56-14",
            "지역코드": "11110",
            "층": "2",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "39,500",
            "거래유형": None,
            "건축년도": "2003",
            "년": "2015",
            "대지권면적": "31.46",
            "법정동": "신교동",
            "연립다세대": "코디골드빌",
            "월": "12",
            "일": "12",
            "전용면적": "64.83",
            "중개사소재지": None,
            "지번": "6-53",
            "지역코드": "11110",
            "층": "4",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "26,000",
            "거래유형": None,
            "건축년도": "1986",
            "년": "2015",
            "대지권면적": "31.74",
            "법정동": "누하동",
            "연립다세대": "(95-0)",
            "월": "12",
            "일": "23",
            "전용면적": "42.6",
            "중개사소재지": None,
            "지번": "95",
            "지역코드": "11110",
            "층": "2",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "50,000",
            "거래유형": None,
            "건축년도": "2001",
            "년": "2015",
            "대지권면적": "44.3",
            "법정동": "계동",
            "연립다세대": "현대I빌라",
            "월": "12",
            "일": "19",
            "전용면적": "84.83",
            "중개사소재지": None,
            "지번": "140-10",
            "지역코드": "11110",
            "층": "3",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "15,000",
            "거래유형": None,
            "건축년도": "1993",
            "년": "2015",
            "대지권면적": "27.45",
            "법정동": "충신동",
            "연립다세대": "(25-59)",
            "월": "12",
            "일": "7",
            "전용면적": "56.68",
            "중개사소재지": None,
            "지번": "25-59",
            "지역코드": "11110",
            "층": "2",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "19,000",
            "거래유형": None,
            "건축년도": "1991",
            "년": "2015",
            "대지권면적": "46",
            "법정동": "동숭동",
            "연립다세대": "(129-29)",
            "월": "12",
            "일": "23",
            "전용면적": "70.73",
            "중개사소재지": None,
            "지번": "129-29",
            "지역코드": "11110",
            "층": "1",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "32,700",
            "거래유형": None,
            "건축년도": "2002",
            "년": "2015",
            "대지권면적": "33.1",
            "법정동": "혜화동",
            "연립다세대": "(6-26)",
            "월": "12",
            "일": "5",
            "전용면적": "68.31",
            "중개사소재지": None,
            "지번": "6-26",
            "지역코드": "11110",
            "층": "4",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "32,900",
            "거래유형": None,
            "건축년도": "2012",
            "년": "2015",
            "대지권면적": "30.07",
            "법정동": "혜화동",
            "연립다세대": "대도아트빌",
            "월": "12",
            "일": "28",
            "전용면적": "51.2",
            "중개사소재지": None,
            "지번": "20-21",
            "지역코드": "11110",
            "층": "3",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "35,900",
            "거래유형": None,
            "건축년도": "2003",
            "년": "2015",
            "대지권면적": "41.997",
            "법정동": "명륜1가",
            "연립다세대": "포스텔",
            "월": "12",
            "일": "13",
            "전용면적": "76.32",
            "중개사소재지": None,
            "지번": "2-18",
            "지역코드": "11110",
            "층": "4",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "27,300",
            "거래유형": None,
            "건축년도": "2002",
            "년": "2015",
            "대지권면적": "34.41",
            "법정동": "창신동",
            "연립다세대": "정우빌라",
            "월": "12",
            "일": "10",
            "전용면적": "64.13",
            "중개사소재지": None,
            "지번": "131-90",
            "지역코드": "11110",
            "층": "1",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "13,500",
            "거래유형": None,
            "건축년도": "1993",
            "년": "2015",
            "대지권면적": "18.74",
            "법정동": "창신동",
            "연립다세대": "동문아트빌라",
            "월": "12",
            "일": "16",
            "전용면적": "42.53",
            "중개사소재지": None,
            "지번": "621-1",
            "지역코드": "11110",
            "층": "1",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "22,650",
            "거래유형": None,
            "건축년도": "1996",
            "년": "2015",
            "대지권면적": "44.3",
            "법정동": "창신동",
            "연립다세대": "이화맨션",
            "월": "12",
            "일": "17",
            "전용면적": "63.75",
            "중개사소재지": None,
            "지번": "609",
            "지역코드": "11110",
            "층": "3",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "20,000",
            "거래유형": None,
            "건축년도": "2001",
            "년": "2015",
            "대지권면적": "20.74",
            "법정동": "숭인동",
            "연립다세대": "월드팰리스",
            "월": "12",
            "일": "3",
            "전용면적": "59.96",
            "중개사소재지": None,
            "지번": "811",
            "지역코드": "11110",
            "층": "-1",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "25,500",
            "거래유형": None,
            "건축년도": "2003",
            "년": "2015",
            "대지권면적": "31.998",
            "법정동": "숭인동",
            "연립다세대": "한서아이빌",
            "월": "12",
            "일": "4",
            "전용면적": "69.87",
            "중개사소재지": None,
            "지번": "714",
            "지역코드": "11110",
            "층": "4",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "22,000",
            "거래유형": None,
            "건축년도": "2001",
            "년": "2015",
            "대지권면적": "22.22",
            "법정동": "숭인동",
            "연립다세대": "동문타운B",
            "월": "12",
            "일": "9",
            "전용면적": "59.98",
            "중개사소재지": None,
            "지번": "181-86",
            "지역코드": "11110",
            "층": "2",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "23,500",
            "거래유형": None,
            "건축년도": "2006",
            "년": "2015",
            "대지권면적": "21.55",
            "법정동": "숭인동",
            "연립다세대": "월드메카",
            "월": "12",
            "일": "11",
            "전용면적": "58.34",
            "중개사소재지": None,
            "지번": "586",
            "지역코드": "11110",
            "층": "1",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "5,100",
            "거래유형": None,
            "건축년도": "2007",
            "년": "2015",
            "대지권면적": "8.2",
            "법정동": "숭인동",
            "연립다세대": "(181-77)",
            "월": "12",
            "일": "12",
            "전용면적": "15.33",
            "중개사소재지": None,
            "지번": "181-77",
            "지역코드": "11110",
            "층": "2",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "27,500",
            "거래유형": None,
            "건축년도": "2015",
            "년": "2015",
            "대지권면적": "23.59",
            "법정동": "숭인동",
            "연립다세대": "한울스페이스Ⅶ",
            "월": "12",
            "일": "15",
            "전용면적": "38.06",
            "중개사소재지": None,
            "지번": "56-94",
            "지역코드": "11110",
            "층": "4",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "12,000",
            "거래유형": None,
            "건축년도": "2001",
            "년": "2015",
            "대지권면적": "15.8",
            "법정동": "숭인동",
            "연립다세대": "서울빌라",
            "월": "12",
            "일": "24",
            "전용면적": "47.13",
            "중개사소재지": None,
            "지번": "645",
            "지역코드": "11110",
            "층": "-1",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "27,200",
            "거래유형": None,
            "건축년도": "2015",
            "년": "2015",
            "대지권면적": "14.5",
            "법정동": "숭인동",
            "연립다세대": "영신아트빌4차",
            "월": "12",
            "일": "25",
            "전용면적": "28.84",
            "중개사소재지": None,
            "지번": "59-29",
            "지역코드": "11110",
            "층": "5",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "20,000",
            "거래유형": None,
            "건축년도": "1999",
            "년": "2015",
            "대지권면적": "22.4",
            "법정동": "행촌동",
            "연립다세대": "(1-3)",
            "월": "12",
            "일": "1",
            "전용면적": "58.23",
            "중개사소재지": None,
            "지번": "1-3",
            "지역코드": "11110",
            "층": "-1",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "15,800",
            "거래유형": None,
            "건축년도": "2001",
            "년": "2015",
            "대지권면적": "18.7",
            "법정동": "행촌동",
            "연립다세대": "삼성아트빌",
            "월": "12",
            "일": "15",
            "전용면적": "43.43",
            "중개사소재지": None,
            "지번": "171-51",
            "지역코드": "11110",
            "층": "1",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "11,900",
            "거래유형": None,
            "건축년도": "1996",
            "년": "2015",
            "대지권면적": "15.2",
            "법정동": "행촌동",
            "연립다세대": "(210-447)",
            "월": "12",
            "일": "21",
            "전용면적": "39.45",
            "중개사소재지": None,
            "지번": "210-447",
            "지역코드": "11110",
            "층": "4",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "52,000",
            "거래유형": None,
            "건축년도": "1988",
            "년": "2015",
            "대지권면적": "113.9",
            "법정동": "구기동",
            "연립다세대": "현대구기빌라",
            "월": "12",
            "일": "30",
            "전용면적": "84.44",
            "중개사소재지": None,
            "지번": "130",
            "지역코드": "11110",
            "층": "3",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "20,000",
            "거래유형": None,
            "건축년도": "2002",
            "년": "2015",
            "대지권면적": "24.64",
            "법정동": "구기동",
            "연립다세대": "한솔리더빌3차(A동)",
            "월": "12",
            "일": "31",
            "전용면적": "57.21",
            "중개사소재지": None,
            "지번": "81-48",
            "지역코드": "11110",
            "층": "4",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "17,200",
            "거래유형": None,
            "건축년도": "1994",
            "년": "2015",
            "대지권면적": "37.63",
            "법정동": "평창동",
            "연립다세대": "동서주택(2000동)",
            "월": "12",
            "일": "8",
            "전용면적": "50.31",
            "중개사소재지": None,
            "지번": "99-42",
            "지역코드": "11110",
            "층": "-1",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "44,000",
            "거래유형": None,
            "건축년도": "1994",
            "년": "2015",
            "대지권면적": "81.48",
            "법정동": "평창동",
            "연립다세대": "힐사이드빌라",
            "월": "12",
            "일": "9",
            "전용면적": "88.33",
            "중개사소재지": None,
            "지번": "329-1",
            "지역코드": "11110",
            "층": "2",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "65,000",
            "거래유형": None,
            "건축년도": "1998",
            "년": "2015",
            "대지권면적": "76.6",
            "법정동": "평창동",
            "연립다세대": "송원빌라트",
            "월": "12",
            "일": "9",
            "전용면적": "157.43",
            "중개사소재지": None,
            "지번": "182-9",
            "지역코드": "11110",
            "층": "4",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "43,000",
            "거래유형": None,
            "건축년도": "1986",
            "년": "2015",
            "대지권면적": "106.45",
            "법정동": "평창동",
            "연립다세대": "현대평창빌라",
            "월": "12",
            "일": "10",
            "전용면적": "84.69",
            "중개사소재지": None,
            "지번": "176",
            "지역코드": "11110",
            "층": "3",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "36,500",
            "거래유형": None,
            "건축년도": "1992",
            "년": "2015",
            "대지권면적": "106.83",
            "법정동": "평창동",
            "연립다세대": "금강주택",
            "월": "12",
            "일": "12",
            "전용면적": "84.95",
            "중개사소재지": None,
            "지번": "170",
            "지역코드": "11110",
            "층": "2",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "28,500",
            "거래유형": None,
            "건축년도": "1988",
            "년": "2015",
            "대지권면적": "94.69",
            "법정동": "평창동",
            "연립다세대": "경남빌라",
            "월": "12",
            "일": "15",
            "전용면적": "84.91",
            "중개사소재지": None,
            "지번": "94",
            "지역코드": "11110",
            "층": "-1",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "10,500",
            "거래유형": None,
            "건축년도": "1990",
            "년": "2015",
            "대지권면적": "22.16",
            "법정동": "평창동",
            "연립다세대": "일신",
            "월": "12",
            "일": "18",
            "전용면적": "36.67",
            "중개사소재지": None,
            "지번": "293-47",
            "지역코드": "11110",
            "층": "4",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "32,000",
            "거래유형": None,
            "건축년도": "1991",
            "년": "2015",
            "대지권면적": "92.33",
            "법정동": "평창동",
            "연립다세대": "평창하이츠빌라가동",
            "월": "12",
            "일": "19",
            "전용면적": "84.91",
            "중개사소재지": None,
            "지번": "456-11",
            "지역코드": "11110",
            "층": "2",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "16,000",
            "거래유형": None,
            "건축년도": "1997",
            "년": "2015",
            "대지권면적": "56.5",
            "법정동": "평창동",
            "연립다세대": "평창스카이빌",
            "월": "12",
            "일": "23",
            "전용면적": "75.45",
            "중개사소재지": None,
            "지번": "549-3",
            "지역코드": "11110",
            "층": "-1",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "27,700",
            "거래유형": None,
            "건축년도": "1983",
            "년": "2015",
            "대지권면적": "95.8",
            "법정동": "평창동",
            "연립다세대": "럭키빌라(C동)",
            "월": "12",
            "일": "30",
            "전용면적": "103.11",
            "중개사소재지": None,
            "지번": "175-19",
            "지역코드": "11110",
            "층": "1",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "34,000",
            "거래유형": None,
            "건축년도": "2007",
            "년": "2015",
            "대지권면적": "46.25",
            "법정동": "부암동",
            "연립다세대": "148-45",
            "월": "12",
            "일": "10",
            "전용면적": "64.76",
            "중개사소재지": None,
            "지번": "148-45",
            "지역코드": "11110",
            "층": "3",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "24,000",
            "거래유형": None,
            "건축년도": "1983",
            "년": "2015",
            "대지권면적": "102",
            "법정동": "부암동",
            "연립다세대": "벽산빌라",
            "월": "12",
            "일": "14",
            "전용면적": "71.8",
            "중개사소재지": None,
            "지번": "239-5",
            "지역코드": "11110",
            "층": "1",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "14,750",
            "거래유형": None,
            "건축년도": "1988",
            "년": "2015",
            "대지권면적": "50.16",
            "법정동": "부암동",
            "연립다세대": "부암빌라(가동)",
            "월": "12",
            "일": "21",
            "전용면적": "34.35",
            "중개사소재지": None,
            "지번": "129-21",
            "지역코드": "11110",
            "층": "1",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "20,000",
            "거래유형": None,
            "건축년도": "1989",
            "년": "2015",
            "대지권면적": "73.18",
            "법정동": "신영동",
            "연립다세대": "완성주택",
            "월": "12",
            "일": "7",
            "전용면적": "38.88",
            "중개사소재지": None,
            "지번": "213-1",
            "지역코드": "11110",
            "층": "3",
            "해제사유발생일": None,
            "해제여부": None,
        },
        {
            "거래금액": "22,580",
            "거래유형": None,
            "건축년도": "1989",
            "년": "2015",
            "대지권면적": "19.93",
            "법정동": "신영동",
            "연립다세대": "완성빌라",
            "월": "12",
            "일": "17",
            "전용면적": "49.32",
            "중개사소재지": None,
            "지번": "212-1",
            "지역코드": "11110",
            "층": "2",
            "해제사유발생일": None,
            "해제여부": None,
        },
    ]
